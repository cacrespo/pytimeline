{% extends "base.html" %}

{% block content %}
<h1>Game Details for: {{player.name}}</h1>
<small>Currently playing: {{ object.current_player.name }}</small>

<h2>Deck: {{ object.deck.count }} cards</h2>

<h2>Your cards: {{ player.cards.count }}</h2>

<form action="{% url 'engine:play_game' object.pk %}" method="post">
    {% csrf_token %}
    <fieldset>
        <ol>
            {% for c in player.cards.all %}
                <li>
                    <label for="id_selection_{{ c.pk }}">
                        <input 
                                type="radio" 
                                name="selection" 
                                value="{{ c.pk }}" 
                                required="" 
                                id="id_selection_{{ c.pk }}">
                        {{ c.text }}
                    </label>
                </li>
            {% endfor %}
        </ol>         
    </fieldset>

    <h2>Timeline: {{ object.timeline.cards.count }} cards</h2>

    <ol>
        {% for elem in timeline_context %}
            {% if elem.is_marker %}
                <li>
                    <label for="id_position_{{ forloop.counter }}">
                        <input type="radio" name="position" value="{{ elem.value }}" required="" id="id_position_{{ forloop.counter }}">
                        (Place your card here)
                    </label>
                </li>
            {% else %}
                <li>{{ elem.value.date }} - {{ elem.value.text }}</li>
            {% endif %}
        {% endfor %}
    </ol>

    <input type="hidden" name="player_name" value="{{ player.name }}">
    <input type="submit" value="Play card">
</form>
{% endblock %}